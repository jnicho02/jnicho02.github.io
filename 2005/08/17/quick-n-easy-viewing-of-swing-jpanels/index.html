<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>

    Quick n easy viewing of Swing JPanels</title>
    <!-- Bootstrap 4 alpha CSS -->
    <!-- IMPORTANT: Don't use this .css file in production. Use Bootstrap 3 until Bootstrap 4.0.0 is released. -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/css/bootstrap.css">

    <link href="/stylesheets/normalize.css" rel="stylesheet" /><link href="/stylesheets/all.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
  </head>

  <body class="x2005 x2005_08 x2005_08_17 x2005_08_17_quick-n-easy-viewing-of-swing-jpanels x2005_08_17_quick-n-easy-viewing-of-swing-jpanels_index">


        <nav class="navbar navbar-fixed-top navbar-dark bg-inverse">
      <!-- Brand -->
      <a class="navbar-brand" href="/"><img src="/images/jez.jpg" width="80em" class="img-circle pull-left" alt="Photo of Jez Nicholson"></a>
      <!-- Links -->
      <ul class="nav navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link 2</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
    </nav>

    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <div class="container-fluid">
      <h1>Quick n easy viewing of Swing JPanels</h1>
      <p>Now, if you're like me, you still like to code Swing panels by hand. Personally I believe that you can keep the code much tighter than a gui design program and also I don't like getting tied in to a product. When i'm coding Swing panels I generally make them bean-like, giving them a single null constructor. When you are making small cosmetic changes it's very tempting to add a main() to each panel so that you can run it standalone, i.e. you don't want to fire up the whole system. But, that is introducing code that the class is not responsible for, and test code starts to creep in to your nice neat classes. My quick n' easy answer was to write a little program that hunts a given source code directory for classes that extend JComponent and have a null constructor, then make them launchable standalone in a frame.</p>

<pre><code>import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.File;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;

/**
 * Offers a list of all JComponents which have null constructors and allows 
 * you to launch one for checking
 */
public class PanelDisplayer
{
    public PanelDisplayer()
    {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setTitle("Panel Displayer");
        
        final JList list = new JList();
        panelModel = new DefaultListModel();
        list.setModel(panelModel);
        
        JButton launch = new JButton("Launch");
        launch.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                Object sel = list.getSelectedValue();
                Class clazz = (Class)sel;
                try
                {
                    // assuming it has a null constructor...
                    Object instance = clazz.newInstance();
                    if (instance instanceof JComponent)
                    {
                        display((JComponent)instance);
                    }
                }
                catch (InstantiationException e1)
                {
                    e1.printStackTrace();
                }
                catch (IllegalAccessException e1)
                {
                    e1.printStackTrace();
                }
            }
        }
        );
        frame.getContentPane().add(new JScrollPane(list));
        frame.getContentPane().add(launch,BorderLayout.SOUTH);
        java.awt.Dimension frameSize = new java.awt.Dimension(800, 350);
        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        frame.setSize(frameSize);
        frame.setLocation(
            (int) (screenSize.getWidth() - frameSize.getWidth()) / 2,
            (int) (screenSize.getHeight() - frameSize.getHeight()) / 2);
        frame.setVisible(true);
        frame.pack();
	}

	public void  populateModel(String root, String pack)
	{
        String packPath = root+pack.replace('.','/');
        File dir = new File(packPath);
        File[] files = dir.listFiles();
        if (null!=files)
        {
        for (int i=0;i&lt;:files.length;i++)
        {
            File file = files[i];
            String name = file.getName();
            if (file.isFile() &amp;&amp; file.getName().endsWith(".java"))
            {
                String classname = pack +"."+name.substring(0,name.lastIndexOf("."));
                try
                {
                    Class clazz = Class.forName(classname);
                    if (JComponent.class.isAssignableFrom(clazz))
                    {
                        try
                        {
                            clazz.getConstructor(null);
                            panelModel.addElement(clazz);
                        } 
                        catch (SecurityException e)
                        {
                        }
                        catch (NoSuchMethodException e)
                        {
                        }
                    }
                } catch (ClassNotFoundException e1)
                {
                    e1.printStackTrace();
                }
            }
            if (file.isDirectory())
            {
                populateModel(root,pack+"."+name);
            }
        }
        }
    }

    /**
     * display chosen panel
     * 
     * @param panel
     */
    public static void display(final JComponent panel)
    {
        JFrame frame = new JFrame();
        frame.setTitle(panel.getName());
        frame.getContentPane().add(panel);
        java.awt.Dimension frameSize = new java.awt.Dimension(800, 350);
        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit()
            .getScreenSize();
        frame.setSize(frameSize);
        frame.setLocation(
            (int) (screenSize.getWidth() - frameSize.getWidth()) / 2,
            (int) (screenSize.getHeight() - frameSize.getHeight()) / 2);
        frame.setVisible(true);
        frame.pack();
    }
    
    private DefaultListModel panelModel;
    
    public static void main(String[] args)
    {
        PanelDisplayer pd = new PanelDisplayer();
        pd.populateModel("y:/accelerator/Java/","core.view");
    }
    
}
</code></pre>

<p>I initially thought that it would be easy enough to ask the ClassLoader about what classes there were, but had a few problems. I ended up scanning the file directory. Maybe someone will show me the error of my ways! Anyway, it is not really polished code I just thought that someone might find it useful.</p>

    </div>

    <div class="container">
  <span>It's All In The Game blog (c) 2005-16 by Jez Nicholson</span>
</div>
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5854204-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- Bootstrap 4 Alpha JS -->
<!-- IMPORTANT: Don't use this .js file in production. Use Bootstrap 3 until Bootstrap 4.0.0 is released. -->
<script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js"></script> 

  </body>
</html>
